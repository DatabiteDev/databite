---
title: "@databite/build"
description: "Core SDK for building connectors to third-party APIs with a fluent, type-safe API"
---

## Overview

The `@databite/build` package provides the core functionality for creating connectors using a fluent API. It includes ConnectorBuilder for defining connectors, Action & Sync Creators, Type Safety, Validation, Retry Logic, Flow Builder, and Connector Validation.

## Installation

```bash
npm install @databite/build @databite/types
```

**Peer Dependencies:**

```bash
npm install zod typescript
```

## Core Classes

### ConnectorBuilder

The main class for building connectors with a fluent API:

```typescript
class ConnectorBuilder<
  TIntegrationConfig extends z.ZodType,
  TConnectionConfig extends z.ZodType
> {
  withIdentity(id: string, name: string): this
  withVersion(version: string): this
  withAuthor(author: string): this
  withLogo(logo: string): this
  withDocumentationUrl(url: string): this
  withDescription(description: string): this
  withIntegrationConfig(config: TIntegrationConfig): this
  withConnectionConfig(config: TConnectionConfig): this
  withAuthenticationFlow(flow: Flow<TConnectionConfig>): this
  withRefresh(refresh: (connection: Connection<TConnectionConfig>) => Promise<z.infer<TConnectionConfig>>): this
  withActions(actions: Record<string, Action>): this
  withSyncs(syncs: Record<string, Sync>): this
  withTags(...tags: string[]): this
  withCategories(...categories: ConnectorCategory[]): this
  build(): Connector<TIntegrationConfig, TConnectionConfig>
}
```

## Builder Methods

### Identity & Metadata

```typescript
// Set connector identity
.withIdentity(id: string, name: string)

// Set version
.withVersion(version: string)

// Set author
.withAuthor(author: string)

// Set logo URL
.withLogo(logo: string)

// Set documentation URL
.withDocumentationUrl(url: string)

// Set description
.withDescription(description: string)
```

### Configuration

```typescript
// Add integration configuration schema
.withIntegrationConfig(config: ZodSchema)

// Add connection configuration schema
.withConnectionConfig(config: ZodSchema)

// Add tags for categorization
.withTags(...tags: string[])

// Add categories
.withCategories(...categories: ConnectorCategory[])
```

#### Flows

```typescript
// Set authentication flow
.withAuthenticationFlow(flow: Flow<TConnectionConfig>)

// Set refresh function
.withRefresh(refresh: (connection: Connection<TConnectionConfig>) => Promise<z.infer<TConnectionConfig>>)
```

#### Actions & Syncs

```typescript
// Add actions
.withActions(actions: Record<string, Action>)

// Add syncs
.withSyncs(syncs: Record<string, Sync>)
```

## Helper Functions

### createConnector

Creates a new ConnectorBuilder instance:

```typescript
function createConnector(): ConnectorBuilder<any, any>
```

### createAction

Creates an action with automatic retry logic and timeout handling:

```typescript
function createAction<
  TInputSchema extends z.ZodType,
  TOutputSchema extends z.ZodType,
  TConnectionConfig extends z.ZodType
>(config: {
  label: string;
  description: string;
  inputSchema: TInputSchema;
  outputSchema: TOutputSchema;
  maxRetries: number;
  timeout: number;
  handler: (
    params: z.infer<TInputSchema>,
    connection: Connection<TConnectionConfig>
  ) => Promise<z.infer<TOutputSchema>>;
}): Action<TInputSchema, TOutputSchema, TConnectionConfig>
```

### createSync

Creates a sync operation for data synchronization:

```typescript
function createSync<
  TOutputSchema extends z.ZodType,
  TConnectionConfig extends z.ZodType
>(config: {
  label: string;
  description: string;
  schedule: string;
  outputSchema: TOutputSchema;
  maxRetries: number;
  timeout: number;
  handler: (
    connection: Connection<TConnectionConfig>
  ) => Promise<z.infer<TOutputSchema>[]>;
}): Sync<TOutputSchema, TConnectionConfig>
```

## Usage Example

```typescript
import { createConnector, createAction, createSync } from "@databite/build";
import { z } from "zod";

const connector = createConnector()
  .withIdentity("my-service", "My Service")
  .withVersion("1.0.0")
  .withAuthor("Your Name")
  .withLogo("https://example.com/logo.png")
  .withDescription("Connector for My Service API")
  .withIntegrationConfig(z.object({ apiKey: z.string() }))
  .withConnectionConfig(z.object({ accessToken: z.string() }))
  .withActions({
    getUser: createAction({
      label: "Get User",
      description: "Fetch user information",
      inputSchema: z.object({ id: z.string() }),
      outputSchema: z.object({ user: z.any() }),
      handler: async (params, connection) => {
        const response = await fetch(
          `${connection.config.baseUrl}/users/${params.id}`,
          {
            headers: {
              Authorization: `Bearer ${connection.config.accessToken}`,
            },
          }
        );
        return { user: await response.json() };
      },
    }),
  })
  .build();
```

### Creating an Action

Creates an action with automatic retry logic and timeout handling:

```typescript
import { createAction } from "@databite/build";
import { z } from "zod";

const action = createAction({
  label: "Get User",
  description: "Fetch user by ID",
  inputSchema: z.object({ id: z.string() }),
  outputSchema: z.object({
    user: z.object({ id: z.string(), name: z.string() }),
  }),
  maxRetries: 3,
  timeout: 30000,
  handler: async (params, connection) => {
    // Your implementation
    return { user: { id: params.id, name: "John Doe" } };
  },
});
```

### Creating A Sync

Creates a sync operation for data synchronization:

```typescript
import { createSync } from "@databite/build";

const sync = createSync({
  label: "Sync Users",
  description: "Synchronize user data",
  schedule: "0 9 * * *", // Daily at 9 AM
  outputSchema: z.array(z.object({ id: z.string() })),
  maxRetries: 3,
  timeout: 60000,
  handler: async (connection) => {
    // Your sync implementation
    return [{ id: "1" }, { id: "2" }];
  },
});
```

## Related Packages

- [@databite/types](/packages/types) - Shared TypeScript types
- [@databite/connectors](/packages/connectors) - Pre-built connector library
- [@databite/engine](/packages/engine) - Data synchronization and execution engine
